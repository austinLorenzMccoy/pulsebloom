(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89],{2788:(e,s,t)=>{"use strict";var a=t(5076);t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},4160:(e,s,t)=>{"use strict";t.d(s,{Wu:()=>o,ZB:()=>d,Zp:()=>n,aR:()=>c});var a=t(4166);t(1446);var r=t(9849);function n(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function c(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function d(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",s),...t})}function o(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",s),...t})}},4209:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var a=t(4166),r=t(1446),n=t(2788),c=t(6314),d=t(4160),o=t(6570),i=t(490),l=t(7632),u=t(5453),m=t(6313);let x=(0,t(1715).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var h=t(8528),g=t(3392),f=t(5249),p=t(4692);function v(){let[e,s]=(0,r.useState)(""),[t,v]=(0,r.useState)(""),[b,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),[y,k]=(0,r.useState)(null),[A,S]=(0,r.useState)(!1),[I,P]=(0,r.useState)(null),C=(0,n.useRouter)();(0,n.useSearchParams)();let _=(0,p.U)();(0,r.useEffect)(()=>{(async()=>{let{data:e,error:s}=await _.auth.getSession();s||!e.session?P(!1):P(!0)})()},[_.auth]);let{strength:R,checks:z}=(e=>{let s=0,t={length:e.length>=8,lowercase:/[a-z]/.test(e),uppercase:/[A-Z]/.test(e),number:/\d/.test(e),special:/[!@#$%^&*(),.?":{}|<>]/.test(e)};return Object.values(t).forEach(e=>{e&&(s+=20)}),{strength:s,checks:t}})(e),J=async s=>{if(s.preventDefault(),S(!0),k(null),e!==t){k("Passwords do not match"),S(!1);return}if(R<60){k("Please choose a stronger password"),S(!1);return}try{let{error:s}=await _.auth.updateUser({password:e});s?k(s.message):C.push("/auth/login?message=password_updated")}catch(e){k("An unexpected error occurred")}finally{S(!1)}};return null===I?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6 bg-gradient-to-br from-accent/30 to-accent/10",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"pulse-bloom mb-4",children:(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-secondary mx-auto"})}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Verifying reset link..."})]})}):!1===I?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6 bg-gradient-to-br from-accent/30 to-accent/10",children:(0,a.jsx)("div",{className:"w-full max-w-md",children:(0,a.jsxs)(d.Zp,{className:"border-0 shadow-2xl",children:[(0,a.jsxs)(d.aR,{className:"text-center pb-8",children:[(0,a.jsx)("div",{className:"mx-auto mb-6",children:(0,a.jsx)("div",{className:"h-16 w-16 rounded-full bg-destructive/20 flex items-center justify-center",children:(0,a.jsx)(m.A,{className:"h-8 w-8 text-destructive"})})}),(0,a.jsx)("h1",{className:"font-heading text-2xl font-semibold text-destructive text-balance",children:"Invalid Reset Link"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"This password reset link is invalid or has expired. Please request a new one."})]}),(0,a.jsx)(d.Wu,{children:(0,a.jsx)(c.$,{onClick:()=>C.push("/auth/forgot-password"),className:"w-full h-12 bg-secondary hover:bg-secondary/90 text-secondary-foreground font-medium",children:"Request New Reset Link"})})]})})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6 bg-gradient-to-br from-accent/30 to-accent/10",children:(0,a.jsx)("div",{className:"w-full max-w-md",children:(0,a.jsxs)(d.Zp,{className:"border-0 shadow-2xl",children:[(0,a.jsxs)(d.aR,{className:"text-center pb-8",children:[(0,a.jsx)("div",{className:"mx-auto mb-6 pulse-bloom",children:(0,a.jsx)("div",{className:"h-16 w-16 rounded-full bg-gradient-to-r from-secondary to-primary flex items-center justify-center",children:(0,a.jsx)(x,{className:"h-8 w-8 text-white"})})}),(0,a.jsx)("h1",{className:"font-heading text-2xl font-semibold text-secondary text-balance",children:"Set New Password"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Choose a strong password to secure your PulseBloom account"})]}),(0,a.jsx)(d.Wu,{children:(0,a.jsxs)("form",{onSubmit:J,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.J,{htmlFor:"password",className:"text-sm font-medium",children:"New Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.p,{id:"password",type:b?"text":"password",placeholder:"Enter your new password",value:e,onChange:e=>s(e.target.value),required:!0,className:"h-12 border-2 focus:border-secondary focus:ring-secondary/20 pr-12"}),(0,a.jsx)("button",{type:"button",onClick:()=>j(!b),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:b?(0,a.jsx)(h.A,{className:"h-5 w-5"}):(0,a.jsx)(g.A,{className:"h-5 w-5"})})]}),e&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.k,{value:R,className:"flex-1 h-2",style:{background:"linear-gradient(to right, \n                            ".concat(R<40?"#ef4444":R<80?"#f59e0b":"#10b981"," 0%, \n                            ").concat(R<40?"#ef4444":R<80?"#f59e0b":"#10b981"," ").concat(R,"%, \n                            #e5e7eb ").concat(R,"%, \n                            #e5e7eb 100%)")}}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:R<40?"Weak":R<80?"Good":"Strong"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 ".concat(z.length?"text-secondary":"text-muted-foreground"),children:[z.length?(0,a.jsx)(f.A,{className:"h-3 w-3"}):(0,a.jsx)(m.A,{className:"h-3 w-3"}),"8+ characters"]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 ".concat(z.uppercase?"text-secondary":"text-muted-foreground"),children:[z.uppercase?(0,a.jsx)(f.A,{className:"h-3 w-3"}):(0,a.jsx)(m.A,{className:"h-3 w-3"}),"Uppercase"]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 ".concat(z.lowercase?"text-secondary":"text-muted-foreground"),children:[z.lowercase?(0,a.jsx)(f.A,{className:"h-3 w-3"}):(0,a.jsx)(m.A,{className:"h-3 w-3"}),"Lowercase"]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 ".concat(z.number?"text-secondary":"text-muted-foreground"),children:[z.number?(0,a.jsx)(f.A,{className:"h-3 w-3"}):(0,a.jsx)(m.A,{className:"h-3 w-3"}),"Number"]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.J,{htmlFor:"confirmPassword",className:"text-sm font-medium",children:"Confirm New Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.p,{id:"confirmPassword",type:N?"text":"password",placeholder:"Confirm your new password",value:t,onChange:e=>v(e.target.value),required:!0,className:"h-12 border-2 focus:border-secondary focus:ring-secondary/20 pr-12"}),(0,a.jsx)("button",{type:"button",onClick:()=>w(!N),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:N?(0,a.jsx)(h.A,{className:"h-5 w-5"}):(0,a.jsx)(g.A,{className:"h-5 w-5"})})]}),t&&e!==t&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:"Passwords do not match"})]}),y&&(0,a.jsx)(l.Fc,{variant:"destructive",children:(0,a.jsx)(l.TN,{children:y})}),(0,a.jsx)(c.$,{type:"submit",className:"w-full h-12 bg-secondary hover:bg-secondary/90 text-secondary-foreground font-medium",disabled:A||R<60||e!==t,children:A?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-4 w-4 rounded-full bg-current animate-pulse"}),"Updating Password..."]}):"Update Password"})]})})]})})})}},4692:(e,s,t)=>{"use strict";t.d(s,{U:()=>r});var a=t(509);function r(){return(0,a.createBrowserClient)("https://rjtynxmasadaovnnwdth.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJqdHlueG1hc2FkYW92bm53ZHRoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1NDAyMTQsImV4cCI6MjA3MjExNjIxNH0.pXpGItGkgp28dRBgFSXO1u9_ni8q7kBGYL99_NjOMkw")}},6314:(e,s,t)=>{"use strict";t.d(s,{$:()=>o});var a=t(4166);t(1446);var r=t(5029),n=t(7142),c=t(9849);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:s,variant:t,size:n,asChild:o=!1,...i}=e,l=o?r.DX:"button";return(0,a.jsx)(l,{"data-slot":"button",className:(0,c.cn)(d({variant:t,size:n,className:s})),...i})}},8121:(e,s,t)=>{Promise.resolve().then(t.bind(t,4209))},9849:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var a=t(2324),r=t(3409);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}}},e=>{var s=s=>e(e.s=s);e.O(0,[509,410,498,305,349,358],()=>s(8121)),_N_E=e.O()}]);