(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{4160:(e,r,t)=>{"use strict";t.d(r,{Wu:()=>d,ZB:()=>i,Zp:()=>n,aR:()=>o});var s=t(4166);t(1446);var a=t(9849);function n(e){let{className:r,...t}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...t})}function o(e){let{className:r,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...t})}function i(e){let{className:r,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",r),...t})}function d(e){let{className:r,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",r),...t})}},4692:(e,r,t)=>{"use strict";t.d(r,{U:()=>a});var s=t(509);function a(){return(0,s.createBrowserClient)("https://rjtynxmasadaovnnwdth.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJqdHlueG1hc2FkYW92bm53ZHRoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1NDAyMTQsImV4cCI6MjA3MjExNjIxNH0.pXpGItGkgp28dRBgFSXO1u9_ni8q7kBGYL99_NjOMkw")}},5774:(e,r,t)=>{Promise.resolve().then(t.bind(t,6937))},6314:(e,r,t)=>{"use strict";t.d(r,{$:()=>d});var s=t(4166);t(1446);var a=t(5029),n=t(7142),o=t(9849);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:r,variant:t,size:n,asChild:d=!1,...l}=e,c=d?a.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,o.cn)(i({variant:t,size:n,className:r})),...l})}},6937:(e,r,t)=>{"use strict";t.d(r,{DashboardContent:()=>C});var s=t(4166),a=t(1446),n=t(6314),o=t(4160),i=t(3195),d=t(9849);let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(i.bL,{ref:r,className:(0,d.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...a})});l.displayName=i.bL.displayName;let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(i._V,{ref:r,className:(0,d.cn)("aspect-square h-full w-full",t),...a})});c.displayName=i._V.displayName;let u=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(i.H4,{ref:r,className:(0,d.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...a})});u.displayName=i.H4.displayName;var m=t(844);function x(e){let{...r}=e;return(0,s.jsx)(m.bL,{"data-slot":"dropdown-menu",...r})}function h(e){let{...r}=e;return(0,s.jsx)(m.l9,{"data-slot":"dropdown-menu-trigger",...r})}function f(e){let{className:r,sideOffset:t=4,...a}=e;return(0,s.jsx)(m.ZL,{children:(0,s.jsx)(m.UC,{"data-slot":"dropdown-menu-content",sideOffset:t,className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",r),...a})})}function g(e){let{className:r,inset:t,variant:a="default",...n}=e;return(0,s.jsx)(m.q7,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":a,className:(0,d.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...n})}function v(e){let{className:r,...t}=e;return(0,s.jsx)(m.wv,{"data-slot":"dropdown-menu-separator",className:(0,d.cn)("bg-border -mx-1 my-1 h-px",r),...t})}let p=(0,t(7142).F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function b(e){let{className:r,variant:t,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)(p({variant:t}),r),...a})}var j=t(8771),y=t(512),N=t(4282),w=t(1122),_=t(1922),A=t(1325),k=t(704),R=t(7666),S=t(2788);function C(e){var r;let{user:t,profile:i}=e,{signOut:d}=(0,R.A)(),m=(0,S.useRouter)(),[p,C]=(0,a.useState)(!1),P=async()=>{C(!0),await d(),m.push("/")},I=(null==i?void 0:i.display_name)||(null==i?void 0:i.full_name)||(null===(r=t.email)||void 0===r?void 0:r.split("@")[0])||"User",E=I.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-background to-accent/10",children:[(0,s.jsx)("header",{className:"border-b border-border/50 bg-background/80 backdrop-blur-sm",children:(0,s.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-8 w-8 rounded-full bg-gradient-to-r from-primary to-secondary pulse-bloom"}),(0,s.jsx)("span",{className:"font-heading text-xl font-semibold text-foreground",children:"PulseBloom"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(n.$,{className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:[(0,s.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Create Poll"]}),(0,s.jsxs)(x,{children:[(0,s.jsx)(h,{asChild:!0,children:(0,s.jsx)(n.$,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:(0,s.jsxs)(l,{className:"h-10 w-10",children:[(0,s.jsx)(c,{src:(null==i?void 0:i.avatar_url)||"",alt:I}),(0,s.jsx)(u,{className:"bg-gradient-to-r from-primary to-secondary text-white",children:E})]})})}),(0,s.jsxs)(f,{className:"w-56",align:"end",forceMount:!0,children:[(0,s.jsxs)("div",{className:"flex flex-col space-y-1 p-2",children:[(0,s.jsx)("p",{className:"text-sm font-medium leading-none",children:I}),(0,s.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:t.email})]}),(0,s.jsx)(v,{}),(0,s.jsxs)(g,{children:[(0,s.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Profile"]}),(0,s.jsxs)(g,{children:[(0,s.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Settings"]}),(0,s.jsx)(v,{}),(0,s.jsxs)(g,{onClick:P,disabled:p,children:[(0,s.jsx)(w.A,{className:"mr-2 h-4 w-4"}),p?"Signing out...":"Sign out"]})]})]})]})]})})}),(0,s.jsxs)("main",{className:"container mx-auto px-6 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("h1",{className:"font-heading text-3xl font-semibold text-foreground mb-2",children:["Welcome back, ",I,"!"]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Here's what's happening with your polls today."})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsxs)(o.Zp,{className:"border-2 border-border hover:border-primary/50 transition-colors",children:[(0,s.jsxs)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(o.ZB,{className:"text-sm font-medium",children:"Total Polls"}),(0,s.jsx)(_.A,{className:"h-4 w-4 text-primary"})]}),(0,s.jsxs)(o.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-foreground",children:"0"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"No polls created yet"})]})]}),(0,s.jsxs)(o.Zp,{className:"border-2 border-border hover:border-secondary/50 transition-colors",children:[(0,s.jsxs)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(o.ZB,{className:"text-sm font-medium",children:"Total Responses"}),(0,s.jsx)(A.A,{className:"h-4 w-4 text-secondary"})]}),(0,s.jsxs)(o.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-foreground",children:"0"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"No responses yet"})]})]}),(0,s.jsxs)(o.Zp,{className:"border-2 border-border hover:border-accent/50 transition-colors",children:[(0,s.jsxs)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(o.ZB,{className:"text-sm font-medium",children:"Engagement Rate"}),(0,s.jsx)(k.A,{className:"h-4 w-4 text-foreground"})]}),(0,s.jsxs)(o.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-foreground",children:"0%"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Create your first poll"})]})]})]}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,s.jsxs)(o.Zp,{className:"border-2 border-border",children:[(0,s.jsx)(o.aR,{children:(0,s.jsxs)(o.ZB,{className:"flex items-center justify-between",children:["Recent Polls",(0,s.jsx)(b,{variant:"secondary",children:"0"})]})}),(0,s.jsx)(o.Wu,{children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(_.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,s.jsx)("h3",{className:"font-heading text-lg font-semibold text-foreground mb-2",children:"No polls yet"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6",children:"Create your first poll to start gathering opinions."}),(0,s.jsxs)(n.$,{className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:[(0,s.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Create Your First Poll"]})]})})]}),(0,s.jsxs)(o.Zp,{className:"border-2 border-border",children:[(0,s.jsx)(o.aR,{children:(0,s.jsx)(o.ZB,{children:"Quick Actions"})}),(0,s.jsxs)(o.Wu,{className:"space-y-4",children:[(0,s.jsxs)(n.$,{variant:"outline",className:"w-full justify-start h-12 border-2 border-primary/20 text-primary hover:bg-primary hover:text-primary-foreground bg-transparent",children:[(0,s.jsx)(j.A,{className:"h-4 w-4 mr-3"}),"Create New Poll"]}),(0,s.jsxs)(n.$,{variant:"outline",className:"w-full justify-start h-12 border-2 border-secondary/20 text-secondary hover:bg-secondary hover:text-secondary-foreground bg-transparent",children:[(0,s.jsx)(_.A,{className:"h-4 w-4 mr-3"}),"View Analytics"]}),(0,s.jsxs)(n.$,{variant:"outline",className:"w-full justify-start h-12 border-2 border-border text-muted-foreground hover:bg-muted hover:text-foreground bg-transparent",children:[(0,s.jsx)(N.A,{className:"h-4 w-4 mr-3"}),"Account Settings"]})]})]})]})]})]})}},7666:(e,r,t)=>{"use strict";t.d(r,{A:()=>l,AuthProvider:()=>d});var s=t(4166),a=t(1446),n=t(4692),o=t(9872);let i=(0,a.createContext)(void 0);function d(e){let{children:r}=e,[t,d]=(0,a.useState)(null),[l,c]=(0,a.useState)(null),[u,m]=(0,a.useState)(!0),x=(0,n.U)();(0,a.useEffect)(()=>{(async()=>{var e;let{data:{session:r}}=await x.auth.getSession();d(null!==(e=null==r?void 0:r.user)&&void 0!==e?e:null),(null==r?void 0:r.user)&&await h(r.user.id),m(!1)})();let{data:{subscription:e}}=x.auth.onAuthStateChange(async(e,r)=>{var t,s;console.log("[v0] Auth state changed:",e,null==r?void 0:null===(t=r.user)||void 0===t?void 0:t.email),d(null!==(s=null==r?void 0:r.user)&&void 0!==s?s:null),(null==r?void 0:r.user)?await h(r.user.id):c(null),m(!1)});return()=>e.unsubscribe()},[x.auth]);let h=async e=>{try{console.log("[v0] Fetching profile for user:",e);let{data:r,error:t}=await x.from("profiles").select("*").eq("id",e).single();if(t&&"PGRST116"!==t.code){console.error("[v0] Error fetching profile:",t);return}console.log("[v0] Profile fetched:",r),c(r||null)}catch(e){console.error("[v0] Error fetching profile:",e)}},f=async(e,r)=>{try{console.log("[v0] Attempting sign in for:",e);let{error:t}=await x.auth.signInWithPassword({email:e,password:r});return t?console.error("[v0] Sign in error:",t):console.log("[v0] Sign in successful"),{error:t}}catch(e){return console.error("[v0] Sign in exception:",e),{error:e}}},g=async(e,r,t)=>{try{console.log("[v0] Attempting sign up for:",e,"with metadata:",t);let{error:s}=await x.auth.signUp({email:e,password:r,options:{emailRedirectTo:o.env.NEXT_PUBLIC_DEV_SUPABASE_REDIRECT_URL||"".concat(window.location.origin,"/auth/callback"),data:t||{}}});return s?console.error("[v0] Sign up error:",s):console.log("[v0] Sign up successful"),{error:s}}catch(e){return console.error("[v0] Sign up exception:",e),{error:e}}},v=async()=>{console.log("[v0] Signing out user"),await x.auth.signOut()},p=async e=>{try{console.log("[v0] Requesting password reset for:",e);let{error:r}=await x.auth.resetPasswordForEmail(e,{redirectTo:o.env.NEXT_PUBLIC_DEV_SUPABASE_REDIRECT_URL||"".concat(window.location.origin,"/auth/reset-password")});return r?console.error("[v0] Password reset error:",r):console.log("[v0] Password reset email sent"),{error:r}}catch(e){return console.error("[v0] Password reset exception:",e),{error:e}}};return(0,s.jsx)(i.Provider,{value:{user:t,profile:l,loading:u,signIn:f,signUp:g,signOut:v,resetPassword:p},children:r})}function l(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9849:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var s=t(2324),a=t(3409);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[509,410,255,305,349,358],()=>r(5774)),_N_E=e.O()}]);